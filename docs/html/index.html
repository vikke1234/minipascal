<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Minipascal: Minipascal</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Minipascal<span id="projectnumber">&#160;0.1</span>
   </div>
   <div id="projectbrief">An interpreter for the minipascal language</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Minipascal </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec0"></a>
Building</h1>
<p>The project requires the build system <code>meson</code> and <code>ninja</code>, compilation is trivial; if you want to specify which compiler to use set the environmental variable <code>CC</code> before running <code>meson</code>. You may install meson with your favorite package manager, it should be available on all major distributions. Non-linux platforms that are unix like may work but are not supported. </p><pre class="fragment"> meson setup build &amp;&amp; cd build &amp;&amp; ninja
</pre> <h1><a class="anchor" id="sec1"></a>
Running</h1>
<p><code>./minipascal foo.mpl</code></p>
<h1><a class="anchor" id="sec2"></a>
Brief introduction to the minipascal interpreter</h1>
<p>The project interpreter is quite small consisting of ~2000 lines, and each phase is split into it's respective files, parsing can be found in parser.{h,cpp} while the lexer is in lexer.{h,cpp} etc.</p>
<p>The parser has a quite a bit of boilerplate code due to the nature of making one in C++. In hindsight choosing a functional language such as ocaml would probably have been a beter idea. The different nodes for the AST can be found in <a class="el" href="expr_8h_source.html">expr.h</a>, recursive descent is used to build the tree.</p>
<h1><a class="anchor" id="sec3"></a>
Lexing</h1>
<p>Lexing is implemented in a naive way, simply a bunch of if statements grouped together when encountering a token. Supports most control characters; octal, hexadecimal and unicode code points are not currently supported.</p>
<h1><a class="anchor" id="sec4"></a>
Parsing</h1>
<p>Parsing consists of a top-down parser (LL(1)), it does not create a parse tree, instead creates an AST directly. You may view the different nodes relationships in the AST with UML diagrams in relevant chapters below. A brief explanation is also shown in <a class="el" href="index.html#req_info">Required info</a>. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="classExpr.html">Expr</a></dd></dl>
<h1><a class="anchor" id="sec5"></a>
Semantical analysis</h1>
<p>Currently the only semantical analysis done is initialization of variables and type checking. Since minipascal is globally scoped, no scope checking is done.</p>
<h1><a class="anchor" id="errors"></a>
Error handling</h1>
<p>Error handling is implemented using the crash and burn approach in the parser. It will exit if it encounters a fatal error like missing tokens such as do or end. I did not have enough time to implement proper error handling. The analyser will analyse the entire file though, it will report all errors it finds.</p>
<p>The lexer currently is incapable of detecting non-terminated strings, it also implements the crash and burn approach, if it encounters a symbol that is not expected, it will exit.</p>
<p>Future work would consist of adding an error type which has ways to handle such errors. For example skipping tokens until a valid one is encountered and getting a new statement from there.</p>
<h1><a class="anchor" id="testing"></a>
Testing</h1>
<p>I was not proficient in automatic testing from earlier and I did not have time to learn how to set everything up so all testing has been done manually. Future work would consist of likely adding this next.</p>
<p>I've used a file which contained all the different constructs of the language. It can be found below: </p><pre class="fragment">var x: int := 10/5;
var y: int;

print y;
y := 123;
print y;
var mybool: bool := !0;
print "foo" + " bar";
print x;
print mybool;

if !(0) do // foo bar
    print "!(0 is true)";
    if x do
        print "truthy!\n";
    end if;
end if;

for x in x..(1 + 20 / 4) do
    print x;
end if;
</pre> <h1><a class="anchor" id="hours"></a>
Hours</h1>
<p>Rough estimate of hours, I'm very bad at tracking time, I easily forget how much time I've actually spent.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Date   </th><th class="markdownTableHeadNone">Hours    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Sun Mar 12   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sat Mar 11   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Fri Mar 10   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Thu Mar 9   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Wed Mar 8   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Thu Mar 2   </td><td class="markdownTableBodyNone">8    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Wed Mar 1   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tue Feb 28   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Mon Feb 27   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Wed Feb 22   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Tue Feb 21   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sun Feb 19   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Thu Feb 2   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tue Jan 31   </td><td class="markdownTableBodyNone">8    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Mon Jan 30   </td><td class="markdownTableBodyNone">4    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Sun Jan 29   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Wed Jan 18   </td><td class="markdownTableBodyNone">5    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Tue Jan 17   </td><td class="markdownTableBodyNone">6    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Total   </td><td class="markdownTableBodyNone">106   </td></tr>
</table>
<h1><a class="anchor" id="req_info"></a>
Required info</h1>
<p>1. A dot is considered any character in this context. An unescaped '*' is zero or more, an unescaped '+' is one or more, a pipe '|' is or. </p><pre class="fragment">token = [A-z]+[A-z0-9]*
digit = [0-9]+
string = ".*"
symbols = [!\+-\*&lt;=&amp;/] | :=
language_tokens = (token | digit | symbols | string)
</pre><p> 2. <code>e</code> is considered as epsilon in this context. </p><pre class="fragment">program     -&gt; stmt_list $$
stmt_list   -&gt; stmt stmt_list | e
stmt        -&gt; var id : type := expr;
            | id := expr;
            | print expr
            | read id
            | for id in expr..expr do stmt_list end for
            | if expr do stmt_list do stmt_list if_tail

if_tail     -&gt; else stmt_list | end

type        -&gt; int | string | bool

expr        -&gt; term term_tail
term_tail   -&gt; add_op term term_tail | e
term        -&gt; factor factor_tail
factor_tail -&gt; mult_op factor factor_tail | e
factor      -&gt; ( expr ) | id | digit
add_op      -&gt; + | -
mult_op     -&gt; * | /
</pre><p> 3. See children of <a class="el" href="classExpr.html">Expr</a>, TL;DR, tree looks like this: </p><div class="fragment"><div class="line">    <a class="code hl_class" href="classStatementList.html">StatementList</a></div>
<div class="line"><a class="code hl_class" href="classExpr.html">Expr</a>        <a class="code hl_class" href="classStatementList.html">StatementList</a></div>
<div class="line">        <a class="code hl_class" href="classExpr.html">Expr</a>        <a class="code hl_class" href="classStatementList.html">StatementList</a></div>
<div class="ttc" id="aclassExpr_html"><div class="ttname"><a href="classExpr.html">Expr</a></div><div class="ttdef"><b>Definition:</b> expr.h:18</div></div>
<div class="ttc" id="aclassStatementList_html"><div class="ttname"><a href="classStatementList.html">StatementList</a></div><div class="ttdef"><b>Definition:</b> expr.h:133</div></div>
</div><!-- fragment --><p> <code><a class="el" href="classExpr.html">Expr</a></code> can be any statement (a little confusing naming convention, it was named such at first and now it's a bit too much work to rename it), a binary operation, print etc. <a class="el" href="classStatementList.html">StatementList</a> is just a tree structure to contain all of the different statements.</p>
<p>4. See <a class="el" href="index.html#errors">Error handling</a></p>
<p>5. See <a class="el" href="index.html#hours">Hours</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 13 2023 01:42:05 for Minipascal by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
